<html lang="en">
<head>

    <meta charset="UTF-8">
    <title>Live Chat</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700">
	<link rel="stylesheet" href="style.css">

</head>
<body>

	<a href="javascript:void(0);" id="another">Another</a>

    <div class="live-chat">
        
        <header class="clearfix">
            
            <a href="#" class="chat-close">x</a>

            <h4>John Doe</h4>

            <span class="chat-message-counter">3</span>

        </header>

        <div class="chat">
            
            <div class="chat-history">
                
                <div class="chat-message clearfix">
                    
                    <img src="http://lorempixum.com/32/32/people" alt="" width="32" height="32">

                    <div class="chat-message-content clearfix">
                        
                        <span class="chat-time">13:35</span>

                        <h5>John Doe</h5>

                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Error, explicabo quasi ratione odio dolorum harum.</p>

                    </div> <!-- end chat-message-content -->

                </div> <!-- end chat-message -->

                <hr>

                <div class="chat-message clearfix">
                    
                    <img src="http://gravatar.com/avatar/2c0ad52fc5943b78d6abe069cc08f320?s=32" alt="" width="32" height="32">

                    <div class="chat-message-content clearfix">
                        
                        <span class="chat-time">13:37</span>

                        <h5>Marco Biedermann</h5>

                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Blanditiis, nulla accusamus magni vel debitis numquam qui tempora rem voluptatem delectus!</p>

                    </div> <!-- end chat-message-content -->

                </div> <!-- end chat-message -->

                <hr>

                <div class="chat-message clearfix">
                    
                    <img src="http://lorempixum.com/32/32/people" alt="" width="32" height="32">

                    <div class="chat-message-content clearfix">
                        
                        <span class="chat-time">13:38</span>

                        <h5>John Doe</h5>

                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing.</p>

                    </div> <!-- end chat-message-content -->

                </div> <!-- end chat-message -->

                <hr>

            </div> <!-- end chat-history -->

            <p class="chat-feedback">Your partner is typing…</p>

            <form action="#" method="post">

                <fieldset>
                    
                    <input type="text" placeholder="Type your message…" autofocus>
                    <input type="hidden">

                </fieldset>

            </form>

        </div> <!-- end chat -->

    </div> <!-- end live-chat -->
	
	<div class="new-chat"></div>
	

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
	
	<script>
		(function() {		
			$(document).on("click", ".live-chat header", function(e) {
				$(this).next('.chat').slideToggle(300, 'swing');
				$(this).find('.chat-message-counter').fadeToggle(300, 'swing');
			});

			$(document).on("click", ".chat-close", function(e) {				
				e.preventDefault();
				$(this).parent().parent('.live-chat').fadeOut(300);				
			});			
			
			$('#another').on('click', function(e) {
				var newChatWidget = $('.live-chat:last').clone();
				$('.live-chat:last').after(newChatWidget);
				
				var chatWidgetLength = $('.live-chat').length;				
				//alert(newChatWidget);
				//$('.new-chat').html(newChatWidget).css('right','348px');				
				//$('.new-chat').css('right','348px');				
				if(chatWidgetLength >= 6){
					chatWidgetLength = 5;
				}				
				var rightCss = parseInt($('.live-chat').eq(chatWidgetLength-2).css('right').replace('px','')) + 324;				
				//var rightCss = 	(chatWidgetLength-1)*rightVar;
				$('.live-chat').eq(chatWidgetLength-1).css('right',rightCss+'px');
			});
		})();
	</script>
    
</body>
</html>